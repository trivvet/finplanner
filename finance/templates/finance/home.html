{% extends "finance/base.html" %}

{% load i18n %}
        
{% block header %}
<div class="row">
    <div class="col-12 text-center ">
        <h1>Project Home Page</h1>
        <p>Here must be a main info</p>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="row mb-5">
    <div class="col-6">
        <h2>Місячні балансові рахунки</h2>
        {% if content.months_approved %}
        {% for month in content.months_approved %}
        <p>{{ month.name }} <a class="btn btn-info btn-sm" href="{% url 'show_balance' month.id %}">Деталі</a>
        {% endfor %}
        {% else %}
        Ні один баланс ще не затверджений
        {% endif %}
    </div>
    <div class="col-6">
        <h2>Місячні бюджети</h2>
        {% if content.months_disapproved %}
        {% for month in content.months_disapproved %}
            <p>{{ month.name }} <a class="btn btn-info btn-sm" href="{% url 'show_month' month.id %}">Деталі</a> <a class="btn btn-danger btn-sm" href="{% url 'delete_month' month.id %}">Видалити</a></p>
        {% endfor %}
        {% else %}
        Ні один бюджет ще не доданий
        {% endif %}
        <form action="/month/add/" method="POST">
            {% csrf_token %}
            {{ form }}
            <div class="input-group date" id="datetimepicker4" data-target-input="nearest">
                <input type="text" class="datetimepicker-input" data-target="#datetimepicker4"
                    name="month_date" placeholder="Виберіть бюджетний місяць"/>
                <div class="input-group-append" data-target="#datetimepicker4" data-toggle="datetimepicker">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>
            <input class="btn btn-success btn-sm" type="submit" value="Додати">
        </form>
    </div>
</div>

<div class="row">
    <div class="col-6">
        <h2>Додати рахунок</h2>
        <form action="/account/add/" method="POST">
            {% csrf_token %}
            {{ form_account }}
            <input class="btn btn-success btn-sm" type="submit" value="Додати">
        </form>
        {% if content.accounts %}
            {% for account in content.accounts %}
                <p>
                {% if account.money or account.blocked %}
                    {{ account }} {{ account.money }} {{ account.blocked }}
                    <a class="btn btn-outline-info btn-sm" href="#">Деталі</a>
                {% else %}
                    <form action="{% url 'delete_account' account.id %}" 
                        method="POST">
                        {% csrf_token %}
                        {{ account }} -
                        <button type="submit" class="btn btn-outline-danger btn-sm">
                            Видалити
                        </button>
                    </form>
                {% endif %}
                </p>
            {% endfor %}
        {% else %}
            <p>Ще немає рахунків у базі</p>
        {% endif %}
    </div>
    <div class="col-6">
        <h2>Залишки</h2>
        {% if content.scores %}
            {% for score in content.scores %}
                <p>{{ score }}</p>
            {% endfor %}
        {% else %}
            <p>Ще немає залишків</p>
        {% endif %}
    </div>
</div>

<div class="row mt-3 mb-5">
    <div class="col-6">
        <a class="btn btn-success" data-toggle="collapse" href="#collapseAddMoney" 
            role="button" aria-expanded="false" aria-controls="collapseAddMoney">
            Додати гроші на рахунок
        </a>
        <div class="collapse" id="collapseAddMoney">
            <div class="card card-body">
                <form action="{% url 'add_plus_transaction' %}" 
                    method="POST" class="form-inline">
                    {% csrf_token %}
                    <div class="form-group ml-2">
                        <div class="input-group date
                            data-target-input datetimepicker" data-target-input="nearest">
                            <input type="text" class="form-control datetimepicker-input" data-target=".datetimepicker" name="date"
                            placeholder="Введіть дату нарахування"/>
                            <div class="input-group-append" data-target=".datetimepicker" data-toggle="datetimepicker">
                                <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                            </div>
                        </div>
                    </div>

                    <div class="form group ml-2">
                        <input class="input-group" type="number" name="money"
                            placeholder="Введіть суму">
                    </div>

                    <div class="form-group ml-2">
                        <select class="input-group" id="source" name="score_source">
                            <option value="">Виберіть рахунок</option>
                            {% for account in content.accounts %}
                                <option value="{{ account.id }}">
                                    {{ account.name }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group ml-2">
                        {{ form_transaction.detail }}
                    </div>
                    <input type="submit" class="btn btn-success btn-sm ml-2" value="Додати">
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock %}